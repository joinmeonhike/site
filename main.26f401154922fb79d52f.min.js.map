{"version":3,"sources":["webpack:///./App.tsx","webpack:///./components/Menu.tsx","webpack:///./firebase.ts","webpack:///./index.tsx","webpack:///./layout/MainLayout.tsx","webpack:///./mapbox.ts","webpack:///./providers/UserProvider.tsx","webpack:///./views/Map.scss?af4c","webpack:///./views/Map.tsx","webpack:///./App.scss","webpack:///./views/Map.scss","webpack:///./App.scss?cbcd","webpack:///external \"React\"","webpack:///external \"ReactDOM\""],"names":["App","exact","path","to","React","hot","module","Content","Layout","Footer","Header","Menu","useAuthState","auth","user","loading","useState","isLoginModalVisible","setIsLoginModalVisible","isCreateNewEventDrawerVisible","setIsCreateNewEventDrawerVisible","uiConfig","signInFlow","signInSuccessUrl","signInOptions","firebase","logoutClick","loginLink","type","onClick","menu","title","visible","onOk","onCancel","footer","firebaseAuth","placement","closable","onClose","withRouter","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","firebaseApp","provider","firestore","signInWithPopup","rootEl","document","getElementById","render","basename","dataset","baseUrl","Builder","props","staticContext","children","mapboxgl","mapbox","UserContext","createContext","UserProvider","userAuth","setState","Provider","value","this","state","Component","Map","mapContainerRef","useRef","lng","setLng","lat","setLat","zoom","setZoom","points","setPoints","currentRoute","setCurrentRoute","useEffect","map","container","current","style","version","sources","osm","tiles","tileSize","attribution","layers","id","source","center","on","getCenter","toFixed","getZoom","e","coordsObj","lngLat","getCanvasContainer","cursor","coords","Object","keys","key","end","getLayer","getSource","setData","addLayer","push","prevPoint","length","url","req","XMLHttpRequest","open","onload","route","JSON","parse","response","routes","geometry","coordinates","r","console","log","geojson","send","getRoute","addControl","position","remove","span","className","ref","___CSS_LOADER_EXPORT___","i","exports","ReactDOM"],"mappings":"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","file":"main.26f401154922fb79d52f.min.js","sourcesContent":["import * as React from \"react\";\nimport { hot } from \"react-hot-loader\";\nimport { Route, Switch, Link } from \"react-router-dom\";\nimport MainLayout from \"./layout/MainLayout\";\nimport './App.scss';\nimport UserProvider from \"./providers/UserProvider\";\nimport Map from \"./views/Map\";\n\nclass App extends React.Component<Record<string, unknown>, unknown> {\n\n    public render() {\n        return (\n          <UserProvider>\n            <MainLayout>\n              <Switch>\n                  <Route exact path=\"/\">\n                    <Map />\n                  </Route>\n                  <Route>\n                      <div>\n                          Not found&nbsp;<Link to=\"/\">Go to root</Link>\n                      </div>\n                  </Route>\n              </Switch>\n            </MainLayout>\n          </UserProvider>\n        );\n    }\n}\n\ndeclare let module: Record<string, unknown>;\n\nexport default hot(module)(App);\n","import * as React from \"react\";\nimport * as _ from \"lodash\";\nimport { withRouter, Redirect, Link } from \"react-router-dom\";\nimport {hot} from \"react-hot-loader\";\nimport { Button, Layout } from 'antd';\nimport { Drawer } from 'antd';\nconst { Content, Footer, Header } = Layout;\nimport { auth, firebase } from \"../firebase\";\nimport { useAuthState } from \"react-firebase-hooks/auth\";\nimport { useState } from 'react';\nimport { Modal } from 'antd';\nimport StyledFirebaseAuth from 'react-firebaseui/StyledFirebaseAuth';\n\n\nconst Menu = () => {\n    const [user, loading, error] = useAuthState(auth);\n    const [isLoginModalVisible, setIsLoginModalVisible] = useState(false);\n    const [isCreateNewEventDrawerVisible, setIsCreateNewEventDrawerVisible] = useState(false);\n\n    const uiConfig = {\n        signInFlow: 'popup',\n        signInSuccessUrl: '/',\n        signInOptions: [\n            firebase.auth.FacebookAuthProvider.PROVIDER_ID,\n        ],\n      };\n\n    const loginClick = () => {\n        setIsLoginModalVisible(true);\n    }\n\n    const closeLoginModal = () => {\n        setIsLoginModalVisible(false);\n    }\n\n    const logoutClick = () => {\n      auth.signOut();\n    }\n\n    const showHelp = () => {\n\n    }\n\n    const showCreateNewEventDrawer = () => {\n      setIsCreateNewEventDrawerVisible(true);\n    };\n\n    const onCreateNewEventDrawerClose = () => {\n      setIsCreateNewEventDrawerVisible(false);\n    };\n\n    let loginLink = (<Button type=\"link\" onClick={loginClick}>Login</Button>);\n\n    if(!loading && user !== null) {\n        loginLink = (<><Link to={\"/profile\"}>Profile</Link><Button type=\"link\" onClick={logoutClick}>Logout</Button></>);\n    }\n\n    let menu = (<><Button type=\"link\" onClick={showCreateNewEventDrawer}>Create new event</Button><Button type=\"link\" onClick={showHelp}>Help</Button>{loginLink}</>);\n    if(loading) {\n        menu = (<></>);\n    }\n\n    return (\n        <>\n            {menu}\n            <Modal title=\"Login\" \n                visible={isLoginModalVisible} \n                onOk={logoutClick} \n                onCancel={closeLoginModal}\n                footer={[]}\n                >\n                    <StyledFirebaseAuth uiConfig={uiConfig} firebaseAuth={auth} />\n                </Modal>\n               <Drawer\n                title=\"Create new event\"\n                placement=\"right\"\n                closable={false}\n                onClose={onCreateNewEventDrawerClose}\n                visible={isCreateNewEventDrawerVisible}\n              >\n                <p>Some contents...</p>\n                <p>Some contents...</p>\n                <p>Some contents...</p>\n              </Drawer>\n        </>\n    );\n}\n\nexport default hot(module)(withRouter(Menu));\n","import firebaseApp from \"firebase/app\";\nimport \"firebase/auth\";\nimport \"firebase/firestore\";\n\nconst firebaseConfig = {\n    apiKey: \"AIzaSyDchbP9S7ufdxADSoHsSiMfkd8euLo3kas\",\n    authDomain: \"joinmeonhike.firebaseapp.com\",\n    projectId: \"joinmeonhike\",\n    storageBucket: \"joinmeonhike.appspot.com\",\n    messagingSenderId: \"826292038177\",\n    appId: \"1:826292038177:web:fd3be97432a2e415809160\",\n    measurementId: \"G-S81VP2G66C\"\n};\n\nfirebaseApp.initializeApp(firebaseConfig);\n\nconst provider = new firebaseApp.auth.GoogleAuthProvider();\n\nexport const signInWithGoogle = () => {\n    auth.signInWithPopup(provider);\n};\n\nexport const firebase = firebaseApp;\nexport const auth = firebaseApp.auth();\nexport const firestore = firebaseApp.firestore();","import * as React from \"react\";\nimport { render } from \"react-dom\";\nimport { BrowserRouter } from 'react-router-dom';\nimport App from \"./App\";\n\nconst rootEl = document.getElementById(\"root\");\n\nrender(<BrowserRouter basename={rootEl.dataset.baseUrl}>\n          <App />\n       </BrowserRouter>, rootEl);\n","import * as React from \"react\";\nimport * as _ from \"lodash\";\nimport { withRouter, Redirect, Link } from \"react-router-dom\";\nimport {hot} from \"react-hot-loader\";\nimport { Button, Layout } from 'antd';\nconst { Content, Footer, Header } = Layout;\nimport Menu from '../components/Menu';\n\nconst Builder = (props) => {\n    \n    const { to, staticContext, children, ...rest } = props;\n    return (\n        <Layout>\n            <Header>\n                <Menu />\n            </Header>\n            <Content>\n                {children}\n            </Content>\n        </Layout>\n    );\n}\n\ndeclare let module: Record<string, unknown>;\nexport default hot(module)(withRouter(Builder));","import mapboxgl from 'mapbox-gl';\n \nmapboxgl.accessToken = 'pk.eyJ1Ijoiam9pbm1lb25oaWtlIiwiYSI6ImNrb3pobjY2YzBhNHcyb2xnN2x1ZTc4bTMifQ.Z1o-MgZFmGk2nod2-AlYTA';\n\nexport const mapbox = mapboxgl;","import React, { Component, createContext } from \"react\";\nimport { auth } from \"../firebase\";\nimport { hot } from \"react-hot-loader\";\n\nexport const UserContext = createContext({ user: null });\n\nclass UserProvider extends Component {\n    state = {\n        user: null,\n    };\n\n    componentDidMount = () => {\n        auth.onAuthStateChanged((userAuth) => {\n            this.setState({ user: userAuth });\n        });\n    };\n\n    render() {\n        return (<UserContext.Provider value={ this.state.user }>\n                { this.props.children }\n                </UserContext.Provider>);\n    }\n}\n\ndeclare let module: Record<string, unknown>;\nexport default hot(module)(UserProvider);","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/sass-loader/dist/cjs.js!./Map.scss\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import * as React from \"react\";\nimport { Row, Col } from 'antd';\nimport { useRef, useEffect, useState } from 'react';\nimport { hot } from \"react-hot-loader\";\nimport { withRouter, Redirect, Link } from \"react-router-dom\";\nimport { auth, firebase } from \"../firebase\";\nimport { useAuthState } from \"react-firebase-hooks/auth\";\nimport './Map.scss';\nimport { mapbox } from \"../mapbox\";\nimport 'mapbox-gl/dist/mapbox-gl.css';\n\n//https://github.com/firebase/firebaseui-web-react\n//https://github.com/alex3165/react-mapbox-gl\nconst Map = () => {\n    const [user, loading, error] = useAuthState(auth);\n\n    const mapContainerRef = useRef(null);\n\n    const [lng, setLng] = useState(5);\n    const [lat, setLat] = useState(34);\n    const [zoom, setZoom] = useState(1.5);\n\n    const [points, setPoints] = useState([]);\n    const [currentRoute, setCurrentRoute] = useState([]);\n\n    // an arbitrary start will always be the same\n    // only the end or destination will change\n    //var start = [-122.662323, 45.523751];\n  \n    // Initialize map when component mounts\n    useEffect(() => {\n      const map = new mapbox.Map({\n        container: mapContainerRef.current,\n        //style: 'mapbox://styles/mapbox/outdoors-v11',\n        style: {\n          version: 8,\n          sources: {\n            osm: {\n              type: 'raster',\n              tiles: [\"https://tile.openstreetmap.org/{z}/{x}/{y}.png\"],\n              tileSize: 256,\n              attribution: 'Map tiles by <a target=\"_top\" rel=\"noopener\" href=\"https://tile.openstreetmap.org/\">OpenStreetMap tile servers</a>, under the <a target=\"_top\" rel=\"noopener\" href=\"https://operations.osmfoundation.org/policies/tiles/\">tile usage policy</a>. Data by <a target=\"_top\" rel=\"noopener\" href=\"http://openstreetmap.org\">OpenStreetMap</a>'\n            }\n          },\n          layers: [{\n            id: 'osm',\n            type: 'raster',\n            source: 'osm',\n          }]\n        },\n        center: [lng, lat],\n        zoom: zoom\n      });\n      /*\n      \n      var map = new mapboxgl.Map({\n  container: 'map',\n  style: {\n    version: 8,\n    sources: {\n      osm: {\n        type: 'raster',\n        tiles: [\"https://tile.openstreetmap.org/{z}/{x}/{y}.png\"],\n        tileSize: 256,\n        attribution: 'Map tiles by <a target=\"_top\" rel=\"noopener\" href=\"https://tile.openstreetmap.org/\">OpenStreetMap tile servers</a>, under the <a target=\"_top\" rel=\"noopener\" href=\"https://operations.osmfoundation.org/policies/tiles/\">tile usage policy</a>. Data by <a target=\"_top\" rel=\"noopener\" href=\"http://openstreetmap.org\">OpenStreetMap</a>'\n      }\n    },\n    layers: [{\n      id: 'osm',\n      type: 'raster',\n      source: 'osm',\n    }],\n  }\n});\n\n      \n      */\n      map.on('move', () => {\n        setLng(map.getCenter().lng.toFixed(4));\n        setLat(map.getCenter().lat.toFixed(4));\n        setZoom(map.getZoom().toFixed(2));\n      });\n\n      function getRoute(end) {\n\n        points.push(end[0]);\n        points.push(end[1]);\n        setPoints(points);\n\n        const prevPoint = points.length == 2 ? points.length - 1 : points.length - 3;\n\n        // make directions request using cycling profile\n        var url =\n          'https://api.mapbox.com/directions/v5/mapbox/walking/' +\n          points[prevPoint - 1] +\n          ',' +\n          points[prevPoint] +\n          ';' +\n          end[0] +\n          ',' +\n          end[1] +\n          '?steps=true&geometries=geojson&access_token=' +\n          mapbox.accessToken;\n\n        // make an XHR request https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest\n        var req = new XMLHttpRequest();\n        req.open('GET', url, true);\n        req.onload = function () {\n          var json = JSON.parse(req.response);\n          var data = json.routes[0];\n          var route = data.geometry.coordinates;\n\n          for(const r in route) {\n            currentRoute.push(route[r]);\n          }\n          setCurrentRoute(currentRoute);\n          console.log(currentRoute)\n\n          var geojson = {\n            'type': 'Feature',\n            'properties': {},\n            'geometry': {\n              'type': 'LineString',\n              'coordinates': currentRoute\n            }\n          };\n          // if the route already exists on the map, we'll reset it using setData\n          if (map.getSource('route')) {\n            map.getSource('route').setData(geojson);\n          }\n          // otherwise, we'll make a new request\n          else {\n            map.addLayer({\n              'id': 'route',\n              'type': 'line',\n              'source': {\n                'type': 'geojson',\n                'data': {\n                  'type': 'Feature',\n                  'properties': {},\n                  'geometry': {\n                    'type': 'LineString',\n                    'coordinates': geojson\n                  }\n                }\n              },\n              'layout': {\n                'line-join': 'round',\n                'line-cap': 'round'\n              },\n              'paint': {\n                'line-color': '#3887be',\n                'line-width': 5,\n                'line-opacity': 0.75\n              }\n            });\n          }\n\n          //console.log(data);\n          // get the sidebar and add the instructions\n          //var instructions = document.getElementById('instructions');\n          //var steps = data.legs[0].steps;\n\n          // var tripInstructions = [];\n          // for (var i = 0; i < steps.length; i++) {\n          //   tripInstructions.push('<br><li>' + steps[i].maneuver.instruction) +\n          //     '</li>';\n          //   //instructions.innerHTML =\n          //   console.log(\n          //     '<br><span class=\"duration\">Trip duration: ' +\n          //     Math.floor(data.duration / 60) +\n          //     ' min 🚴 </span>' +\n          //     tripInstructions);\n          // }\n        };\n        req.send();\n      }\n\n\n      map.on('click', function (e) {\n        // console.log(e);\n\n        // var coordinates = e.lngLat;\n         \n        // // Ensure that if the map is zoomed out such that multiple\n        // // copies of the feature are visible, the popup appears\n        // // over the copy being pointed to.\n        // while (Math.abs(e.lngLat.lng - coordinates[0]) > 180) {\n        //   coordinates[0] += e.lngLat.lng > coordinates[0] ? 360 : -360;\n        // }\n        var coordsObj = e.lngLat;\n        map.getCanvasContainer().style.cursor = '';\n          var coords = Object.keys(coordsObj).map(function (key) {\n            return coordsObj[key];\n          });\n          var end = {\n            'type': 'FeatureCollection',\n            'features': [\n              {\n                'type': 'Feature',\n                'properties': {},\n                'geometry': {\n                  'type': 'Point',\n                  'coordinates': coords\n                }\n              }\n            ]\n          };\n          if (map.getLayer('end')) {\n            map.getSource('end').setData(end);\n          } else {\n            map.addLayer({\n              'id': 'start',\n              'type': 'circle',\n              'source': {\n                'type': 'geojson',\n                'data': {\n                  'type': 'FeatureCollection',\n                  'features': [\n                    {\n                      'type': 'Feature',\n                      'properties': {},\n                      'geometry': {\n                        'type': 'Point',\n                        'coordinates': coords\n                      }\n                    }\n                  ]\n                }\n              },\n              'paint': {\n                'circle-radius': 10,\n                'circle-color': '#f30'\n              }\n            });\n\n            map.addLayer({\n              'id': 'end',\n              'type': 'circle',\n              'source': {\n                'type': 'geojson',\n                'data': {\n                  'type': 'FeatureCollection',\n                  'features': [\n                    {\n                      'type': 'Feature',\n                      'properties': {},\n                      'geometry': {\n                        'type': 'Point',\n                        'coordinates': []\n                      }\n                    }\n                  ]\n                }\n              },\n              'paint': {\n                'circle-radius': 10,\n                'circle-color': '#3887be'\n              }\n            });\n          }\n          getRoute(coords);\n      });   \n      \n      // 3D\n      // map.on('load', function () {\n      //   map.addSource('mapbox-dem', {\n      //   'type': 'raster-dem',\n      //   'url': 'mapbox://mapbox.mapbox-terrain-dem-v1',\n      //   'tileSize': 512,\n      //   'maxzoom': 14\n      //   });\n      //   // add the DEM source as a terrain layer with exaggerated height\n      //   map.setTerrain({ 'source': 'mapbox-dem', 'exaggeration': 1.5 });\n         \n      //   // add a sky layer that will show when the map is highly pitched\n      //   map.addLayer({\n      //   'id': 'sky',\n      //   'type': 'sky',\n      //   'paint': {\n      //     'sky-type': 'atmosphere',\n      //     'sky-atmosphere-sun': [0.0, 0.0],\n      //     'sky-atmosphere-sun-intensity': 15\n      //     }\n      //   });\n      // });\n\n      map.addControl(new mapbox.NavigationControl());\n      map.addControl(new mapbox.ScaleControl({position: 'bottom-right'}));\n\n  \n      // Clean up on unmount\n      return () => map.remove();\n    }, []);\n    \n\n    return (\n      <>\n        <Row>\n          <Col span={18}>\n            <div className='map-container' ref={mapContainerRef} />\n          </Col>\n          <Col span={6}>\n            col-6 col-pull-18\n          </Col>\n        </Row>\n      </>\n    );\n}\n\nexport default hot(module)(withRouter(Map));\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../node_modules/css-loader/dist/runtime/api.js\";\nimport ___CSS_LOADER_AT_RULE_IMPORT_0___ from \"-!../node_modules/css-loader/dist/cjs.js!../node_modules/antd/dist/antd.css\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n___CSS_LOADER_EXPORT___.i(___CSS_LOADER_AT_RULE_IMPORT_0___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".app{font-family:helvetica, arial, sans-serif;padding:2em;border:5px solid red}.app p{background-color:#ff0}.pl-10{padding-left:10px}.pl-5{padding-left:5px}.pl-15{padding-left:15px}div.react-flow__handle{width:12px;height:12px}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./App.scss\"],\"names\":[],\"mappings\":\"AAKA,KACE,wCAAyC,CACzC,WAAY,CACZ,oBALgB,CAElB,OAMI,qBATa,CAUd,OAID,iBAAkB,CACnB,MAGC,gBAAiB,CAClB,OAGC,iBAAkB,CACnB,uBAGC,UAAW,CACX,WAAY\",\"sourcesContent\":[\"@import '~antd/dist/antd.css';\\n\\n$bg-color: yellow;\\n$border-color: red;\\n\\n.app {\\n  font-family: helvetica, arial, sans-serif;\\n  padding: 2em;\\n  border: 5px solid $border-color;\\n\\n  p {\\n    background-color: $bg-color;\\n  }\\n}\\n\\n.pl-10 {\\n  padding-left: 10px;\\n}\\n\\n.pl-5 {\\n  padding-left: 5px;\\n}\\n\\n.pl-15 {\\n  padding-left: 15px;\\n}\\n\\ndiv.react-flow__handle {\\n  width: 12px;\\n  height: 12px;\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".map-container{width:100%;height:93vh}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./views/Map.scss\"],\"names\":[],\"mappings\":\"AAAA,eACI,UAAW,CACX,WAAY\",\"sourcesContent\":[\".map-container {\\n    width: 100%;\\n    height: 93vh;\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","import api from \"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../node_modules/css-loader/dist/cjs.js!../node_modules/sass-loader/dist/cjs.js!./App.scss\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","module.exports = React;","module.exports = ReactDOM;"],"sourceRoot":""}